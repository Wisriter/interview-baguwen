# 分布式

## 知道哪些分布式锁实现方案？

答：常见分布式锁实现方案如下：

1. 基于关系型数据库比如 MySQL 实现分布式锁。
2. 基于分布式协调服务 ZooKeeper 实现分布式锁。
3. 基于分布式键值存储系统比如 Redis 、Etcd 实现分布式锁。

下面讲一讲基于mysql的分布式锁实现，基于数据库（MySQL）的方案，一般分为3类：基于表记录、乐观锁和悲观锁【https://blog.csdn.net/u013256816/article/details/92854794】

1. 基于表记录，最简单。直接创建一张锁表，然后通过操作该表中的数据来实现了。当我们想要获得锁的时候，就可以在该表中增加一条记录，想要释放锁的时候就删除这条记录。这种情况下，要实现可重入锁的话，可以在数据库中添加一些字段，比如获得锁的主机信息、线程信息等，那么在再次获得锁的时候可以先查询数据，如果当前的主机信息和线程信息等能被查到的话，可以直接把锁分配给它。
2. 乐观锁。比如版本控制的方法。乐观锁比较适合并发量不高，并且写操作不频繁的场景。
3. 悲观锁。还可以借助数据库中自带的锁来实现分布式锁。在查询语句后面增加**FOR UPDATE**，数据库会在查询过程中给数据库表增加悲观锁，也称排他锁。当某条记录被加上悲观锁之后，其它线程也就无法再改行上增。



# 设计模式

## 设计模式的原则？

答：在面向对象设计模式中，最主要的原则通常被认为是以下五个，它们被称为SOLID原则：

1. **单一职责原则（Single Responsibility Principle, SRP）**： 每个类应该只有一个单一的职责，这意味着一个类的代码应该只负责一项功能。
2. **开放-封闭原则（Open-Closed Principle, OCP）**： 软件实体应当对扩展开放，对修改封闭。这意味着软件模块应该能够不受修改地扩展其功能。
3. **里氏替换原则（Liskov Substitution Principle, LSP）**： 子类型必须能够替换掉它们的父类型，即基类可以被子类无缝替换，而不影响程序的行为。
4. **依赖倒置原则（Dependency Inversion Principle, DIP）**： 高层次的模块不应依赖于低层次的模块，两者都应该依赖于抽象。抽象不应依赖于细节，细节应依赖于抽象。
5. **接口隔离原则（Interface Segregation Principle, ISP）**： 客户端不应该依赖它不需要的接口，一个类对另一个类的依赖应该建立在最小的接口上。



## 说一说你了解的设计模式

答：java里面有23种设计模式，分为三大类：创建型模式、结构型模式和行为型模式。创建模式，常见的有（**单例模式、工厂模式**）、结构型模式有（**代理模式**）、行为型模式有（**策略模式**）

单例模式：确保一个类只有一个实例

工厂模式：定义一个用于创建产品的接口，由子类决定生产什么产品。

代理模式：为某对象提供一种代理以控制对该对象的访问。即客户端通过代理间接地访问该对象，从而限制、增强或修改该对象的一些特性。

策略模式：定义了一系列算法，并将每个算法封装起来，使它们可以相互替换，且算法的改变不会影响使用算法的客户。

观察者模式：

***



## 手撕单例模式

饿汉

懒汉

双重控制

枚举类

***



# Linux

## 常用命令

答：如下

1. **ls** - 列出目录内容。
2. **cd** - 改变当前目录。
3. **pwd** - 显示当前工作目录。
4. **cp** - 复制文件或目录。
5. **mv** - 移动或重命名文件或目录。
6. **rm** - 删除文件或目录。
7. **rmdir** - 删除空目录。
8. **mkdir** - 创建新目录。
9. **chmod** - 更改文件或目录的权限。
10. **chown** - 更改文件或目录的所有者和组。
11. **find** - 在目录树中搜索文件。
12. **grep** - 搜索文本并打印匹配行。
13. **tar** - 归档文件。
14. **gzip** - 压缩或解压文件。
15. **du** - 检查磁盘使用情况。
16. **df** - 报告文件系统的磁盘空间使用情况。
17. **ps** - 显示当前进程状态。
18. **top** - 实时显示进程的动态实时视图。
19. **kill** - 发送信号给进程。
20. **chmod** - 更改文件或目录的权限。
21. **chown** - 更改文件或目录的用户所有者和/或组所有者。
22. **vi** - 命令行文本编辑器。
23. **wget** - 从网络下载文件。
24. **curl** - 用于传输数据的工具。
25. **ssh** - 安全的网络协议，用于远程登录和其他安全网络服务。
26. **scp** - 安全复制文件。



查找文件名包含某个关键字的文件

```bash
find [搜索路径] -name '*关键字*'
```



## 文件权限表示法

答：

1. **符号表示法**：

- - 使用字母r、w和x来表示读（read）、写（write）和执行（execute）权限。
  - 权限通常以三个一组的形式出现，分别对应所有者（owner）、组（group）和其他用户（others）的权限。
  - 例如，-rwxr-xr--表示所有者有读、写和执行权限，组用户有读和执行权限，其他用户有读权限。

1. **数字表示法**：

- - 使用数字来表示权限，其中读（r）= 4，写（w）= 2，执行（x）= 1。
  - 权限的数字表示是将对应的数字相加得到的。例如，读和写权限是 4 + 2 = 6。
  - 特殊权限（如setuid、setgid、sticky bit）在数字表示法中也有特定的值：setuid = 4，setgid = 2，sticky bit = 1。



## top 命令

1. **基本使用**：

- - 启动 top 命令，只需在终端输入 top 并按回车键。

1. **显示内容**：

- - top 显示了系统中进程的动态实时视图，包括进程ID（PID）、用户（USER）、优先级（PR）、虚拟内存使用（VIRT）、物理内存使用（RES）、共享内存（SHR）、CPU使用率（%CPU）、内存使用率（%MEM）、以及启动时间（STIME）和总的CPU时间（TIME）。

1. **交互操作**：

- - 在 top 运行时，可以使用多种交互命令：

- - - P：按CPU使用率排序。
    - M：按内存使用率排序。
    - 1：显示各个CPU的详细信息。
    - k：杀死进程，需要输入进程的PID和信号值（通常为9表示SIGKILL）。

htop 是 top 的一个增强版本，它提供了一个彩色的界面，并且可以通过鼠标或键盘进行交互操作。在大多数Linux发行版中，htop 可能不是预装的，需要通过包管理器安装。



## cat命令

cat [选项] [文件]

【https://www.runoob.com/linux/linux-comm-cat.html】

**参数说明：**

- -n：显示行号，会在输出的每一行前加上行号。
- -b：显示行号，但只对非空行进行编号。
- -s：压缩连续的空行，只显示一个空行。
- -E：在每一行的末尾显示 $ 符号。
- -T：将 Tab 字符显示为 ^I。
- -v：显示一些非打印字符。

还可以创建文件，追加内容，连接文件，等等

```shell
cat filename
cat > filename
cat >> filename # 加到末尾
cat file1 file2 > file3 # 合并到file3中
cat file1 file2
cat filename | tail -n 10 # 显示文件 filename 的最后 10 行
```



## grep命令

global regular expression

grep [options] pattern [files]

【https://www.runoob.com/linux/linux-comm-grep.html】

**常用选项：**

- -i：忽略大小写进行匹配。
- -v：反向查找，只打印不匹配的行。
- -n：显示匹配行的行号。
- -r：递归查找子目录中的文件。
- -l：只打印匹配的文件名。
- -c：只打印匹配的行数。

```shell
grep -r -n pattern dir/ # 在文件夹中递归查找所有文件中匹配"pattern"的行，并打印行号和内容
```



## 软连接和硬连接

答：

1. **软链接（Symbolic Link）**：

- - 类似于Windows中的快捷方式，它包含了目标文件的路径。
  - 可以跨越文件系统，而硬链接不能跨文件系统。
  - 如果目标文件被移动或删除，软链接将不再有效。
  - 可以为目录创建软链接。

1. **硬链接（Hard Link）**：

- - 是对文件数据区的一个独立引用，对文件系统中的物理文件进行链接。
  - 不能跨文件系统，且不能为目录创建硬链接。
  - 目标文件被删除或移动，硬链接仍然可以访问原始文件数据。
  - 硬链接共享目标文件的inode，因此它们实际上指向同一个数据。

简而言之，软链接是一个包含目标文件路径的特殊文件，而硬链接是同一个文件系统中对文件inode的直接引用。

innode：inode包含了指向数据块的指针，所以即使文件名更改或被移动到另一个目录，inode中的指针仍然指向相同的数据块，这意味着文件的内容不会受到影响。



## 文件夹可执行和文件可执行区别？

在Linux系统中，文件和文件夹（目录）的可执行权限有不同含义：

1. **文件夹的可执行权限**：

- - 当一个文件夹具有可执行权限时，它允许用户“进入”该文件夹，也就是能够访问该文件夹的内容或子文件夹。
  - 没有可执行权限的文件夹，即使用户对该文件夹有读取权限，也无法进入或列出其内容。
  - 可执行权限对于文件夹来说是必需的，因为Linux中“打开”一个文件夹或“进入”一个文件夹本质上是执行一个操作。

1. **文件的可执行权限**：

- - 当一个文件具有可执行权限时，它允许用户执行该文件作为程序。
  - 这意味着该文件可以被shell作为命令或脚本运行。
  - 没有可执行权限的文件不能直接执行，即使用户对该文件有读取权限。

总结来说，文件夹的可执行权限与能否进入该文件夹相关，而文件的可执行权限与能否执行该文件相关。在Linux中，每个文件和文件夹都至少有读取（r）、写入（w）和执行（x）三种权限，分别对应不同的操作：

- 文件的读取权限允许查看文件内容。
- 文件的写入权限允许修改文件内容。
- 文件的执行权限允许执行文件作为程序。
- 文件夹的读取权限允许列出文件夹中的文件和子文件夹。
- 文件夹的写入权限允许修改文件夹中的内容（创建、删除、重命名文件或子文件夹）。
- 文件夹的执行权限允许进入文件夹。